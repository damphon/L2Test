<!DOCTYPE html><html><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width'/><link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css'><link rel='stylesheet' type='text/css' href='C:\Users\jtoler\Source\Repos\L2Test\L2Test\L2Test\Content\Site.css'><title>L2 Test</title></head><body><!--
    
 _____           _           _     _         _      _____   _____         _   
|  __ \         | |         | |   | |       | |    / __  \ |_   _|       | |  
| |  \/ ___   __| | __ _  __| | __| |_   _  | |    `' / /'   | | ___  ___| |_ 
| | __ / _ \ / _` |/ _` |/ _` |/ _` | | | | | |      / /     | |/ _ \/ __| __|
| |_\ \ (_) | (_| | (_| | (_| | (_| | |_| | | |____./ /___   | |  __/\__ \ |_ 
 \____/\___/ \__,_|\__,_|\__,_|\__,_|\__, | \_____/\_____/   \_/\___||___/\__|
                                      __/ |                                   
                                     |___/                                    
    
Your test is timed, don't waste that time looking at source code!
--><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link href="/Content/bootstrap.css" rel="stylesheet">
<link href="/Content/site.css" rel="stylesheet">

    <script src="/Scripts/modernizr-2.6.2.js"></script>

    <title>L2 Test</title>
<style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style></head>
<body>
    <section class="TestPageContent">
        <div class="TimerFloat">
            <center><div id="timer">Time Remaining: 0:00</div></center>
        </div>
        <div class="SubmitFloat">
            <center><button id="SubmitButton" name="SubmitButton" class="btn btn-info" onclick="SendAnswers();">Submit Test for Grading</button></center>
        </div>
        <div>
            <ul class="Test" style="list-style-type:none">
                <li class="well" id="1021"><p class="TestQuestion">None Correct</p><p class="TestAnswer" id="2qsgbyZ6Wk">A. pppp</p><p class="TestAnswer" id="RPWtXFHBNR">B. yyyyyyy</p><p class="TestAnswer" id="2qsgbyZ6Wk">C. uuuuu</p><p class="TestAnswer" id="2qsgbyZ6Wk">D. ooooo</p><p class="TestAnswer" id="2qsgbyZ6Wk">E. iiiii</p></li><li class="well" id="1020"><p class="TestQuestion">All correct</p><p class="TestAnswer" id="fAKOA1KFfo">A. rrr</p><p class="TestAnswer" id="fAKOA1KFfo">B. wwww</p><p class="TestAnswer" id="fAKOA1KFfo">C. qqq</p><p class="TestAnswer" id="fAKOA1KFfo">D. eee</p><p class="TestAnswer" id="fAKOA1KFfo">E. ttt</p><p class="TestAnswer" id="fAKOA1KFfo">F. yyy</p></li><li class="well" id="1016"><p class="TestQuestion">How many people in adventure Zone?</p><p class="TestAnswer" id="dkWdkrTl0m">A. 14</p><p class="TestAnswer" id="dkWdkrTl0m">B. 7</p><p class="TestAnswer" id="dkWdkrTl0m">C. 9</p><p class="TestAnswer" id="dkWdkrTl0m">D. 8</p><p class="TestAnswer" id="dkWdkrTl0m">E. 11</p><p class="TestAnswer" id="dkWdkrTl0m">F. 6</p><p class="TestAnswer" id="nVs1ykbPiP">G. 2</p><p class="TestAnswer" id="dkWdkrTl0m">H. 10</p><p class="TestAnswer" id="nVs1ykbPiP">I. 3</p><p class="TestAnswer" id="nVs1ykbPiP">J. 5</p><p class="TestAnswer" id="dkWdkrTl0m">K. 13</p><p class="TestAnswer" id="nVs1ykbPiP">L. 4</p><p class="TestAnswer" id="nVs1ykbPiP">M. 1</p><p class="TestAnswer" id="dkWdkrTl0m">N. 12</p><p class="TestAnswer" id="dkWdkrTl0m">O. 15</p></li><li class="well" id="1018"><p class="TestQuestion">Yes or No</p><p class="TestAnswer SelectedAnswer" id="pO5tTKbGME">A. Yes</p><p class="TestAnswer SelectedAnswer" id="pO5tTKbGME">B. No</p></li><li class="well" id="1019"><p class="TestQuestion">We are the Crystal</p><p class="TestAnswer" id="pBEAZvGAmO">A. Gems</p><p class="TestAnswer" id="pBEAZvGAmO">B. potatoes</p><p class="TestAnswer" id="pBEAZvGAmO">C. Meths</p><p class="TestAnswer" id="pBEAZvGAmO">D. jewlers</p></li><li class="well" id="1017"><p class="TestQuestion">True or False</p><p class="TestAnswer" id="GZaK6X7ACw">A. True</p><p class="TestAnswer" id="woEWR4P8t4">B. False</p></li>
            </ul>
        </div>
    </section>
    <script src="../../Scripts/jquery-1.10.2.js"></script>
    <script src="../../Scripts/bootstrap.js"></script>
    <script src="../../Scripts/respond.js"></script>
    <script>
        //This script section needs to use jquery so that the above file paths are broken when archived preventing the selected answers from being changed and the test from being submitted.

        //Toggel which answer is selected
        $('.TestAnswer').click(function () {
            $(this).toggleClass('SelectedAnswer');
        });
        $('.SelectedAnswer').click(function () {
            $(this).toggleClass('TestAnswer');
        });

        //Count down time left before test auto submits
        var timeInMinutes = 1;
        var currentTime = Date.parse(new Date());
        var deadline = new Date(currentTime + timeInMinutes * 60000);//60000 milliseconds in a minute

        $(document).ready(startTimer(deadline));

        function startTimer(endtime) {
            var timer = document.getElementById('timer');
            var changeTime = setInterval(function myTimer() {
                var timeRemaining = getTimeRemaining(endtime);
                timer.innerHTML = 'Time Remaining: ' + timeRemaining.minutes + ':' + ('0' + timeRemaining.seconds).slice(-2);
                if (timeRemaining.total <= 0) {
                    clearInterval(changeTime);
                    SendAnswers();
                } 
            }, 1000);
        }

        function getTimeRemaining(endtime) {
            var timeRemaining = Date.parse(endtime) - Date.parse(new Date());
            var seconds = Math.floor((timeRemaining / 1000) % 60); //1000 milliseconds in second, modulus 60 to only get remainder  after minutes have been accounted for.
            var minutes = Math.floor((timeRemaining / 60000)); //60000 milliseconds in a minute

            return {
                'total': timeRemaining,
                'minutes': minutes,
                'seconds': seconds
            };
        }

        function SendAnswers() {

            var tech = 'EBrdaArpNI';
            var htmlString = document.documentElement.innerHTML;

            $.ajax({
                url: "http://localhost:55966/Home/TestArchive",
                type: "POST",
                contentType: "application/json",
                dataType: "json",
                data: JSON.stringify({ html: htmlString, tech: tech })
            });

            var list = [];
            for (var i = 0; i < document.getElementsByTagName("li").length; i++) {
                var answer = {};
                var answers = [];
                var currentQuestion = document.getElementsByTagName("li")[i];
                answer.tech = tech;
                answer.question = currentQuestion.getAttribute("id");
                for (var n = 0; n < currentQuestion.childNodes.length; n++) {
                    if (currentQuestion.childNodes[n].className == "TestAnswer SelectedAnswer") {
                        answers.push(currentQuestion.childNodes[n].id);
                    }
                }
                answer.answers = answers;
                list.push(answer);
            }
            $.ajax({
                url: "http://localhost:55966/Home/TestResults",
                type: "POST",
                contentType: "application/json",
                dataType: "text",
                data: JSON.stringify(list),
                success: function (data) {
                    $('.TestPageContent').html(data);
                },
                error: function () {
                    alert("Test not graded, a lead will need to manually grade this test.");
                }
            });

        }
    </script>

<!-- Visual Studio Browser Link -->
<script type="application/json" id="__browserLink_initializationData">
    {"appName":"Chrome","requestId":"c8e4abd1fb364d18a42b5ec90d8db6dc"}
</script>
<script type="text/javascript" src="http://localhost:50266/536512c360714e1bbd0bff4da6f1283c/browserLink" async="async"></script>
<!-- End Browser Link -->


</body></body></html>